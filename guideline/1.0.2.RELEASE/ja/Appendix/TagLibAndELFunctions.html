<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>7.3. 共通ライブラリが提供するJSP Tag Library と EL Functions &mdash; TERASOLUNA Global Framework Development Guideline 1.0.2.RELEASE documentation</title>
    
    <link rel="stylesheet" href="../_static/solar.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '1.0.2.RELEASE',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="top" title="TERASOLUNA Global Framework Development Guideline 1.0.2.RELEASE documentation" href="../index.html" />
    <link rel="up" title="7. Appendix" href="index.html" />
    <link rel="next" title="7.4. NEXUSによるMavenリポジトリの管理" href="Nexus.html" />
    <link rel="prev" title="7.2. Blankプロジェクトから新規プロジェクト作成" href="CreateProjectFromBlank.html" /><script src="../_static/jquery.treeview.js" type="text/javascript"></script>
<!-- <link href='http://fonts.googleapis.com/css?family=Source+Code+Pro|Open+Sans:300italic,400italic,700italic,400,300,700' rel='stylesheet' type='text/css'> -->
<link href="../_static/solarized-dark.css" rel="stylesheet">
<link href="../_static/jquery.treeview.css" rel="stylesheet">
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="Nexus.html" title="7.4. NEXUSによるMavenリポジトリの管理"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="CreateProjectFromBlank.html" title="7.2. Blankプロジェクトから新規プロジェクト作成"
             accesskey="P">previous</a> |</li>
        <li><a href="../index.html">TERASOLUNA Global Framework Development Guideline 1.0.2.RELEASE documentation</a> &raquo;</li>
          <li><a href="index.html" accesskey="U">7. Appendix</a> &raquo;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper"><label><input id="scroll" type="checkbox" checked> scroll sidebar</label>

  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">7.3. 共通ライブラリが提供するJSP Tag Library と EL Functions</a><ul>
<li><a class="reference internal" href="#overview">7.3.1. Overview</a><ul>
<li><a class="reference internal" href="#jsp-tag-library">7.3.1.1. JSP Tag Library</a></li>
<li><a class="reference internal" href="#el-functions">7.3.1.2. EL Functions</a></li>
</ul>
</li>
<li><a class="reference internal" href="#how-to-use">7.3.2. How to use</a><ul>
<li><a class="reference internal" href="#t-pagination">7.3.2.1. &lt;t:pagination&gt;</a></li>
<li><a class="reference internal" href="#t-messagespanel">7.3.2.2. &lt;t:messagesPanel&gt;</a></li>
<li><a class="reference internal" href="#t-transaction">7.3.2.3. &lt;t:transaction&gt;</a></li>
<li><a class="reference internal" href="#f-h">7.3.2.4. f:h()</a><ul>
<li><a class="reference internal" href="#id1">7.3.2.4.1. f:h() 関数仕様</a></li>
<li><a class="reference internal" href="#id2">7.3.2.4.2. f:h() 使用方法</a></li>
</ul>
</li>
<li><a class="reference internal" href="#f-js">7.3.2.5. f:js()</a><ul>
<li><a class="reference internal" href="#id3">7.3.2.5.1. f:js() 関数仕様</a></li>
<li><a class="reference internal" href="#id4">7.3.2.5.2. f:js() 使用方法</a></li>
</ul>
</li>
<li><a class="reference internal" href="#f-hjs">7.3.2.6. f:hjs()</a><ul>
<li><a class="reference internal" href="#id5">7.3.2.6.1. f:hjs() 関数仕様</a></li>
<li><a class="reference internal" href="#id6">7.3.2.6.2. f:hjs() 使用方法</a></li>
</ul>
</li>
<li><a class="reference internal" href="#f-query">7.3.2.7. f:query()</a><ul>
<li><a class="reference internal" href="#id7">7.3.2.7.1. f:query() 関数仕様</a></li>
<li><a class="reference internal" href="#id8">7.3.2.7.2. f:query() 使用方法</a></li>
</ul>
</li>
<li><a class="reference internal" href="#f-u">7.3.2.8. f:u()</a><ul>
<li><a class="reference internal" href="#id9">7.3.2.8.1. f:u() 関数仕様</a></li>
<li><a class="reference internal" href="#id10">7.3.2.8.2. f:u() 使用方法</a></li>
</ul>
</li>
<li><a class="reference internal" href="#f-link">7.3.2.9. f:link()</a><ul>
<li><a class="reference internal" href="#id11">7.3.2.9.1. f:link() 関数仕様</a></li>
<li><a class="reference internal" href="#id12">7.3.2.9.2. f:link() 使用方法</a></li>
</ul>
</li>
<li><a class="reference internal" href="#f-br">7.3.2.10. f:br()</a><ul>
<li><a class="reference internal" href="#id13">7.3.2.10.1. f:br() 関数仕様</a></li>
<li><a class="reference internal" href="#id14">7.3.2.10.2. f:br() 使用方法</a></li>
</ul>
</li>
<li><a class="reference internal" href="#f-cut">7.3.2.11. f:cut()</a><ul>
<li><a class="reference internal" href="#id15">7.3.2.11.1. f:cut() 関数仕様</a></li>
<li><a class="reference internal" href="#id16">7.3.2.11.2. f:cut() 使用方法</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>


  <h4>Previous topic</h4>
  <p class="topless"><a href="CreateProjectFromBlank.html"
                        title="previous chapter">7.2. Blankプロジェクトから新規プロジェクト作成</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="Nexus.html"
                        title="next chapter">7.4. NEXUSによるMavenリポジトリの管理</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../_sources/Appendix/TagLibAndELFunctions.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="jsp-tag-library-el-functions">
<h1>7.3. 共通ライブラリが提供するJSP Tag Library と EL Functions<a class="headerlink" href="#jsp-tag-library-el-functions" title="Permalink to this headline">¶</a></h1>
<div class="section" id="overview">
<span id="taglibandelfunctionsoverview"></span><h2>7.3.1. Overview<a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h2>
<p>共通ライブラリでは、JSPの実装をサポートする機能として、
以下に示すJSP Tag Library と EL Functionsを提供している。</p>
<div class="section" id="jsp-tag-library">
<span id="taglibandelfunctionsoverviewtaglibs"></span><h3>7.3.1.1. JSP Tag Library<a class="headerlink" href="#jsp-tag-library" title="Permalink to this headline">¶</a></h3>
<p>共通ライブラリから提供しているJSP Tag Libraryを以下に示す。</p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="6%" />
<col width="28%" />
<col width="67%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><div class="first last line-block">
<div class="line">項番</div>
</div>
</th>
<th class="head"><div class="first last line-block">
<div class="line">タグ名</div>
</div>
</th>
<th class="head"><div class="first last line-block">
<div class="line">概要</div>
</div>
</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><ol class="first last arabic simple">
<li></li>
</ol>
</td>
<td><a class="reference internal" href="#taglibandelfunctionshowtousetaglibpagination"><em>&lt;t:pagination&gt;</em></a></td>
<td>ページネーションリンクを出力する。</td>
</tr>
<tr class="row-odd"><td><ol class="first last arabic simple" start="2">
<li></li>
</ol>
</td>
<td><a class="reference internal" href="#taglibandelfunctionshowtousetaglibmessagespanel"><em>&lt;t:messagesPanel&gt;</em></a></td>
<td>処理結果メッセージを出力する。</td>
</tr>
<tr class="row-even"><td><ol class="first last arabic simple" start="3">
<li></li>
</ol>
</td>
<td><a class="reference internal" href="#taglibandelfunctionshowtousetaglibtransaction"><em>&lt;t:transaction&gt;</em></a></td>
<td>トランザクショントークンをhidden項目として出力する。</td>
</tr>
</tbody>
</table>
</div></blockquote>
</div>
<div class="section" id="el-functions">
<span id="taglibandelfunctionsoverviewelfunctions"></span><h3>7.3.1.2. EL Functions<a class="headerlink" href="#el-functions" title="Permalink to this headline">¶</a></h3>
<p>共通ライブラリから提供しているEL Functionsを以下に示す。</p>
<p><strong>XSS対策関連</strong></p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="6%" />
<col width="28%" />
<col width="67%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><div class="first last line-block">
<div class="line">項番</div>
</div>
</th>
<th class="head"><div class="first last line-block">
<div class="line">関数名</div>
</div>
</th>
<th class="head"><div class="first last line-block">
<div class="line">概要</div>
</div>
</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><ol class="first last arabic simple">
<li></li>
</ol>
</td>
<td><a class="reference internal" href="#taglibandelfunctionshowtouseelfunctionh"><em>f:h()</em></a></td>
<td>指定されたオブジェクトを文字列に変換し、変換した文字列内のHTML特殊文字をエスケープする。</td>
</tr>
<tr class="row-odd"><td><ol class="first last arabic simple" start="2">
<li></li>
</ol>
</td>
<td><a class="reference internal" href="#taglibandelfunctionshowtouseelfunctionjs"><em>f:js()</em></a></td>
<td>指定された文字列内のJavaScript特殊文字をエスケープする。</td>
</tr>
<tr class="row-even"><td><ol class="first last arabic simple" start="3">
<li></li>
</ol>
</td>
<td><a class="reference internal" href="#taglibandelfunctionshowtouseelfunctionhjs"><em>f:hjs()</em></a></td>
<td>指定された文字列内のJavaScript特殊文字をエスケープ後、HTML特殊文字をエスケープする。(<tt class="docutils literal"><span class="pre">f:h(f:js())</span></tt>のショートカット関数)</td>
</tr>
</tbody>
</table>
</div></blockquote>
<p><strong>URL関連</strong></p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="6%" />
<col width="28%" />
<col width="67%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><div class="first last line-block">
<div class="line">項番</div>
</div>
</th>
<th class="head"><div class="first last line-block">
<div class="line">関数名</div>
</div>
</th>
<th class="head"><div class="first last line-block">
<div class="line">概要</div>
</div>
</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><ol class="first last arabic simple" start="4">
<li></li>
</ol>
</td>
<td><a class="reference internal" href="#taglibandelfunctionshowtouseelfunctionquery"><em>f:query()</em></a></td>
<td>指定されたオブジェクトから、UTF-8でURLエンコーディングされたクエリ文字列を生成する。</td>
</tr>
<tr class="row-odd"><td><ol class="first last arabic simple" start="5">
<li></li>
</ol>
</td>
<td><a class="reference internal" href="#taglibandelfunctionshowtouseelfunctionu"><em>f:u()</em></a></td>
<td>指定された文字列をUTF-8でURLエンコーディングする。</td>
</tr>
</tbody>
</table>
</div></blockquote>
<p><strong>DOM関連</strong></p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="6%" />
<col width="28%" />
<col width="67%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><div class="first last line-block">
<div class="line">項番</div>
</div>
</th>
<th class="head"><div class="first last line-block">
<div class="line">関数名</div>
</div>
</th>
<th class="head"><div class="first last line-block">
<div class="line">概要</div>
</div>
</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><ol class="first last arabic simple" start="6">
<li></li>
</ol>
</td>
<td><a class="reference internal" href="#taglibandelfunctionshowtouseelfunctionlink"><em>f:link()</em></a></td>
<td>指定されたURLにジャンプするハイパーリンク(<tt class="docutils literal"><span class="pre">&lt;a&gt;</span></tt>タグ)を生成する。</td>
</tr>
<tr class="row-odd"><td><ol class="first last arabic simple" start="7">
<li></li>
</ol>
</td>
<td><a class="reference internal" href="#taglibandelfunctionshowtouseelfunctionbr"><em>f:br()</em></a></td>
<td>指定された文字列内の改行コードを<tt class="docutils literal"><span class="pre">&lt;br</span> <span class="pre">/&gt;</span></tt>タグに変換する。</td>
</tr>
</tbody>
</table>
</div></blockquote>
<p><strong>ユーティリティ</strong></p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="6%" />
<col width="28%" />
<col width="67%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><div class="first last line-block">
<div class="line">項番</div>
</div>
</th>
<th class="head"><div class="first last line-block">
<div class="line">関数名</div>
</div>
</th>
<th class="head"><div class="first last line-block">
<div class="line">概要</div>
</div>
</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><ol class="first last arabic simple" start="8">
<li></li>
</ol>
</td>
<td><a class="reference internal" href="#taglibandelfunctionshowtouseelfunctioncut"><em>f:cut()</em></a></td>
<td>指定された文字列から、指定された文字数を抜き出す。</td>
</tr>
</tbody>
</table>
</div></blockquote>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
</div>
<div class="section" id="how-to-use">
<span id="taglibandelfunctionshowtouse"></span><h2>7.3.2. How to use<a class="headerlink" href="#how-to-use" title="Permalink to this headline">¶</a></h2>
<p>共通ライブラリから提供している JSP Tag Library と EL関数の使用方法を以下に示す。
なお、他の章で使用方法の説明があるものについては、該当箇所へのハイパーリンクを貼っている。</p>
<div class="line-block">
<div class="line"><br /></div>
</div>
<div class="section" id="t-pagination">
<span id="taglibandelfunctionshowtousetaglibpagination"></span><h3>7.3.2.1. &lt;t:pagination&gt;<a class="headerlink" href="#t-pagination" title="Permalink to this headline">¶</a></h3>
<p><tt class="docutils literal"><span class="pre">&lt;t:pagination&gt;</span></tt>タグは、
ページ検索の結果(<tt class="docutils literal"><span class="pre">org.springframework.data.domain.Page</span></tt>)に格納されている情報を参照して、
ページネーションリンクを出力するJSP Tag Libraryである。</p>
<p>ページネーション機能の説明及び本タグの使用方法は、「<a class="reference internal" href="../ArchitectureInDetail/Pagination.html"><em>ページネーション</em></a>」の以下の節を参照されたい。</p>
<ul class="simple">
<li>ページネーションリンクについては、「<a class="reference internal" href="../ArchitectureInDetail/Pagination.html#pagination-overview-paginationlink"><em>ページネーションリンクの表示について</em></a>」</li>
<li>本タグのパラメータ値については、「<a class="reference internal" href="../ArchitectureInDetail/Pagination.html#pagination-overview-paginationlink-taglibparameters"><em>JSPタブライブラリのパラメータについて</em></a>」</li>
<li>本タグを使用したJSPの基本的な実装方法については、「<a class="reference internal" href="../ArchitectureInDetail/Pagination.html#pagination-how-to-use-make-jsp-basic-paginationlink"><em>ページネーションリンクの表示</em></a>」</li>
<li>ページネーションリンクのレイアウトの変更方法については、「<a class="reference internal" href="../ArchitectureInDetail/Pagination.html#pagination-how-to-use-make-jsp-layout"><em>JSPの実装(レイアウト変更編)</em></a>」</li>
</ul>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
<div class="section" id="t-messagespanel">
<span id="taglibandelfunctionshowtousetaglibmessagespanel"></span><h3>7.3.2.2. &lt;t:messagesPanel&gt;<a class="headerlink" href="#t-messagespanel" title="Permalink to this headline">¶</a></h3>
<p><tt class="docutils literal"><span class="pre">&lt;t:messagesPanel&gt;</span></tt>タグは、
処理結果メッセージ(<tt class="docutils literal"><span class="pre">org.terasoluna.gfw.common.message.ResultMessage</span></tt>や例外が保持するメッセージなど)を出力するJSP Tag Libraryである。</p>
<p>本タグの使用方法は、「<a class="reference internal" href="../ArchitectureInDetail/MessageManagement.html"><em>メッセージ管理</em></a>」の以下の節を参照されたい。</p>
<ul class="simple">
<li>本タグを使用したメッセージの表示方法については、「<a class="reference internal" href="../ArchitectureInDetail/MessageManagement.html#message-display"><em>結果メッセージの表示</em></a>」</li>
<li>本タグのパラメータ値については、「<a class="reference internal" href="../ArchitectureInDetail/MessageManagement.html#message-management-messagepanel-attribute"><em>&lt;t:messagesPanel&gt;タグの属性変更</em></a>」</li>
</ul>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
<div class="section" id="t-transaction">
<span id="taglibandelfunctionshowtousetaglibtransaction"></span><h3>7.3.2.3. &lt;t:transaction&gt;<a class="headerlink" href="#t-transaction" title="Permalink to this headline">¶</a></h3>
<p><tt class="docutils literal"><span class="pre">&lt;t:transaction&gt;</span></tt>タグは、トランザクショントークンをhidden項目(<tt class="docutils literal"><span class="pre">&lt;input</span> <span class="pre">type=&quot;hidden&quot;&gt;&quot;</span></tt>)として出力するJSP Tag Libraryである。</p>
<p>トランザクショントークンチェック機能の説明及び本タグの使用方法は、「<a class="reference internal" href="../ArchitectureInDetail/DoubleSubmitProtection.html"><em>二重送信防止</em></a>」の以下の節を参照されたい。</p>
<ul class="simple">
<li>トランザクショントークンチェック機能については、「<a class="reference internal" href="../ArchitectureInDetail/DoubleSubmitProtection.html#doublesubmit-how-to-use-transaction-token-check"><em>トランザクショントークンチェックの適用</em></a>」</li>
<li>本タグの使用方法については、「<a class="reference internal" href="../ArchitectureInDetail/DoubleSubmitProtection.html#doublesubmit-how-to-use-transaction-token-check-jsp"><em>トランザクショントークンチェックのView(JSP)での利用方法</em></a>」</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>本タグは、HTML標準の<tt class="docutils literal"><span class="pre">&lt;form&gt;</span></tt>タグを使用する際にトランザクショントークンをサーバに送信するために使用する。</p>
<p class="last">Spring Framework提供の<tt class="docutils literal"><span class="pre">&lt;form:form&gt;</span></tt>タグ(JSP Tag Library)を使用する際は、
共通ライブラリから提供している<tt class="docutils literal"><span class="pre">org.terasoluna.gfw.web.token.transaction.TransactionTokenRequestDataValueProcessor</span></tt>が自動でトランザクショントークンを埋め込む仕組みになっているため、
本タグを使用する必要はない。</p>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
<div class="section" id="f-h">
<span id="taglibandelfunctionshowtouseelfunctionh"></span><h3>7.3.2.4. f:h()<a class="headerlink" href="#f-h" title="Permalink to this headline">¶</a></h3>
<p><tt class="docutils literal"><span class="pre">f:h()</span></tt>は、引数に指定されたオブジェクトを文字列に変換し、変換した文字列内のHTML特殊文字をエスケープするEL Functionである。</p>
<p>HTML特殊文字とエスケープ仕様については、「<a class="reference internal" href="../Security/XSS.html#xss-how-to-use-ouput-escaping"><em>Output Escaping</em></a>」を参照されたい。</p>
<div class="section" id="id1">
<h4>7.3.2.4.1. f:h() 関数仕様<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h4>
<p><strong>引数</strong></p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="11%" />
<col width="22%" />
<col width="67%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">項番</th>
<th class="head">型</th>
<th class="head">説明</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><ol class="first last arabic simple">
<li></li>
</ol>
</td>
<td><tt class="docutils literal"><span class="pre">java.lang.Object</span></tt></td>
<td>HTML特殊文字が含まれる可能性があるオブジェクト</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>指定されたオブジェクトは、</p>
<ul class="simple">
<li>配列の場合は、<tt class="docutils literal"><span class="pre">java.util.Arrays#toString</span></tt>メソッド</li>
<li>配列以外の場合は、指定されたオブジェクトの <tt class="docutils literal"><span class="pre">toString</span></tt>メソッド</li>
</ul>
<p class="last">を使用して文字列に変換される。</p>
</div>
</div></blockquote>
<p><strong>戻り値</strong></p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="11%" />
<col width="22%" />
<col width="67%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">項番</th>
<th class="head">型</th>
<th class="head">説明</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><ol class="first last arabic simple">
<li></li>
</ol>
</td>
<td><tt class="docutils literal"><span class="pre">java.lang.String</span></tt></td>
<td><p class="first">HTMLエスケープ後の文字列</p>
<p class="last">引数で指定さらたオブジェクトが<tt class="docutils literal"><span class="pre">null</span></tt>の場合は、空文字(<tt class="docutils literal"><span class="pre">&quot;&quot;</span></tt>)を返却する。</p>
</td>
</tr>
</tbody>
</table>
</div></blockquote>
</div>
<div class="section" id="id2">
<h4>7.3.2.4.2. f:h() 使用方法<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h4>
<p><tt class="docutils literal"><span class="pre">f:h()</span></tt>の使用方法については、「<a class="reference internal" href="../Security/XSS.html#xss-how-to-use-h-function-example"><em>出力値をf:h()関数でエスケープする例</em></a>」を参照されたい。</p>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
</div>
<div class="section" id="f-js">
<span id="taglibandelfunctionshowtouseelfunctionjs"></span><h3>7.3.2.5. f:js()<a class="headerlink" href="#f-js" title="Permalink to this headline">¶</a></h3>
<p><tt class="docutils literal"><span class="pre">f:js()</span></tt>は、引数に指定された文字列内のJavaScript特殊文字をエスケープするEL Functionである。</p>
<p>JavaScript特殊文字とエスケープ仕様については、「<a class="reference internal" href="../Security/XSS.html#xss-how-to-use-javascript-escaping"><em>JavaScript Escaping</em></a>」を参照されたい。</p>
<div class="section" id="id3">
<h4>7.3.2.5.1. f:js() 関数仕様<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h4>
<p><strong>引数</strong></p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="11%" />
<col width="22%" />
<col width="67%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">項番</th>
<th class="head">型</th>
<th class="head">説明</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><ol class="first last arabic simple">
<li></li>
</ol>
</td>
<td><tt class="docutils literal"><span class="pre">java.lang.String</span></tt></td>
<td>JavaScript特殊文字が含まれる可能性がある文字列</td>
</tr>
</tbody>
</table>
</div></blockquote>
<p><strong>戻り値</strong></p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="11%" />
<col width="22%" />
<col width="67%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">項番</th>
<th class="head">型</th>
<th class="head">説明</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><ol class="first last arabic simple">
<li></li>
</ol>
</td>
<td><tt class="docutils literal"><span class="pre">java.lang.String</span></tt></td>
<td><p class="first">JavaScriptエスケープ後の文字列</p>
<p class="last">引数で指定さらた文字列が<tt class="docutils literal"><span class="pre">null</span></tt>の場合は、空文字(<tt class="docutils literal"><span class="pre">&quot;&quot;</span></tt>)を返却する。</p>
</td>
</tr>
</tbody>
</table>
</div></blockquote>
</div>
<div class="section" id="id4">
<h4>7.3.2.5.2. f:js() 使用方法<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h4>
<p><tt class="docutils literal"><span class="pre">f:js()</span></tt>の使用方法については、「<a class="reference internal" href="../Security/XSS.html#xss-how-to-use-js-function-example"><em>出力値をf:js()関数でエスケープする例</em></a>」を参照されたい。</p>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
</div>
<div class="section" id="f-hjs">
<span id="taglibandelfunctionshowtouseelfunctionhjs"></span><h3>7.3.2.6. f:hjs()<a class="headerlink" href="#f-hjs" title="Permalink to this headline">¶</a></h3>
<p><tt class="docutils literal"><span class="pre">f:hjs()</span></tt>は、引数に指定された文字列内のJavaScript特殊文字をエスケープした後に、
HTML特殊文字をエスケープするEL Function(<tt class="docutils literal"><span class="pre">f:h(f:js())</span></tt>のショートカット関数)である。</p>
<ul class="simple">
<li>本関数の用途については、「<a class="reference internal" href="../Security/XSS.html#xss-how-to-use-event-handler-escaping"><em>Event handler Escaping</em></a>」を参照されたい。</li>
<li>JavaScript特殊文字とエスケープ仕様については、「<a class="reference internal" href="../Security/XSS.html#xss-how-to-use-javascript-escaping"><em>JavaScript Escaping</em></a>」を参照されたい。</li>
<li>HTML特殊文字とエスケープ仕様については、「<a class="reference internal" href="../Security/XSS.html#xss-how-to-use-ouput-escaping"><em>Output Escaping</em></a>」を参照されたい。</li>
</ul>
<div class="section" id="id5">
<h4>7.3.2.6.1. f:hjs() 関数仕様<a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h4>
<p><strong>引数</strong></p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="11%" />
<col width="22%" />
<col width="67%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">項番</th>
<th class="head">型</th>
<th class="head">説明</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><ol class="first last arabic simple">
<li></li>
</ol>
</td>
<td><tt class="docutils literal"><span class="pre">java.lang.String</span></tt></td>
<td>JavaScript特殊文字又はHTML特殊文字が含まれる可能性がある文字列</td>
</tr>
</tbody>
</table>
</div></blockquote>
<p><strong>戻り値</strong></p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="11%" />
<col width="22%" />
<col width="67%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">項番</th>
<th class="head">型</th>
<th class="head">説明</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><ol class="first last arabic simple">
<li></li>
</ol>
</td>
<td><tt class="docutils literal"><span class="pre">java.lang.String</span></tt></td>
<td><p class="first">JavaScript及びHTMLエスケープ後の文字列</p>
<p class="last">引数で指定さらた文字列が<tt class="docutils literal"><span class="pre">null</span></tt>の場合は、空文字(<tt class="docutils literal"><span class="pre">&quot;&quot;</span></tt>)を返却する。</p>
</td>
</tr>
</tbody>
</table>
</div></blockquote>
</div>
<div class="section" id="id6">
<h4>7.3.2.6.2. f:hjs() 使用方法<a class="headerlink" href="#id6" title="Permalink to this headline">¶</a></h4>
<p><tt class="docutils literal"><span class="pre">f:hjs()</span></tt>の使用方法については、「<a class="reference internal" href="../Security/XSS.html#xss-how-to-use-hjs-function-example"><em>出力値をf:hjs()関数でエスケープする例</em></a>」を参照されたい。</p>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
</div>
<div class="section" id="f-query">
<span id="taglibandelfunctionshowtouseelfunctionquery"></span><h3>7.3.2.7. f:query()<a class="headerlink" href="#f-query" title="Permalink to this headline">¶</a></h3>
<p><tt class="docutils literal"><span class="pre">f:query()</span></tt>は、引数に指定されたJavaBean(フォームオブジェクト)又は<tt class="docutils literal"><span class="pre">java.util.Map</span></tt>オブジェクトから、
クエリ文字列を生成するEL Functionである。
クエリ文字列内のパラメータ名とパラメータ値は、UTF-8でURLエンコーディングされる。</p>
<p>URLエンコーディング仕様を以下に示す。</p>
<p>本関数では、クエリ文字列のパラメータ名とパラメータ値に対して、<a class="reference external" href="http://www.ietf.org/rfc/rfc3986.txt">RFC 3986</a>ベースのURLエンコーディングを行う。
RFC 3986では、クエリ文字列のパート以下のように定義している。</p>
<div class="figure">
<a class="reference internal image-reference" href="../_images/TagLibAndELFunctionsRFC3986UriSyntax.png"><img alt="../_images/TagLibAndELFunctionsRFC3986UriSyntax.png" src="../_images/TagLibAndELFunctionsRFC3986UriSyntax.png" style="width: 90%;" /></a>
</div>
<ul class="simple">
<li>query = *( pchar / <tt class="docutils literal"><span class="pre">&quot;/&quot;</span></tt> / <tt class="docutils literal"><span class="pre">&quot;?&quot;</span></tt>)</li>
<li>pchar = unreserved / pct-encoded / sub-delims / <tt class="docutils literal"><span class="pre">&quot;:&quot;</span></tt> / <tt class="docutils literal"><span class="pre">&quot;&#64;&quot;</span></tt></li>
<li>unreserved = ALPHA / DIGIT / <tt class="docutils literal"><span class="pre">&quot;-&quot;</span></tt> / <tt class="docutils literal"><span class="pre">&quot;.&quot;</span></tt> / <tt class="docutils literal"><span class="pre">&quot;_&quot;</span></tt> / <tt class="docutils literal"><span class="pre">&quot;~&quot;</span></tt></li>
<li>sub-delims = <tt class="docutils literal"><span class="pre">&quot;!&quot;</span></tt> / <tt class="docutils literal"><span class="pre">&quot;$&quot;</span></tt> / <tt class="docutils literal"><span class="pre">&quot;&amp;&quot;</span></tt> / <tt class="docutils literal"><span class="pre">&quot;'&quot;</span></tt> / <tt class="docutils literal"><span class="pre">&quot;(&quot;</span></tt> / <tt class="docutils literal"><span class="pre">&quot;)&quot;</span></tt> / <tt class="docutils literal"><span class="pre">&quot;*&quot;</span></tt> / <tt class="docutils literal"><span class="pre">&quot;+&quot;</span></tt> / <tt class="docutils literal"><span class="pre">&quot;,&quot;</span></tt> / <tt class="docutils literal"><span class="pre">&quot;;&quot;</span></tt> / <tt class="docutils literal"><span class="pre">&quot;=&quot;</span></tt></li>
<li>pct-encoded = <tt class="docutils literal"><span class="pre">&quot;%&quot;</span></tt> HEXDIG HEXDIG</li>
</ul>
<p>本関数では、クエリ文字列として使用できる文字のうち、</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">&quot;=&quot;</span></tt> (パラメータ名とパラメータ値のセパレータ文字)</li>
<li><tt class="docutils literal"><span class="pre">&quot;&amp;&quot;</span></tt> (複数のパラメータを扱う場合のセパレータ文字)</li>
<li><tt class="docutils literal"><span class="pre">&quot;+&quot;</span></tt> (HTMLのformからサブミットした時に半角スペースを表す文字)</li>
</ul>
<p>をpct-encoded形式の文字列にエンコーディングする。</p>
<div class="section" id="id7">
<h4>7.3.2.7.1. f:query() 関数仕様<a class="headerlink" href="#id7" title="Permalink to this headline">¶</a></h4>
<p><strong>引数</strong></p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="11%" />
<col width="22%" />
<col width="67%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">項番</th>
<th class="head">型</th>
<th class="head">説明</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><ol class="first last arabic simple">
<li></li>
</ol>
</td>
<td><tt class="docutils literal"><span class="pre">java.lang.Object</span></tt></td>
<td><p class="first">クエリ文字列の生成元となるオブジェクト(JavaBean又は<tt class="docutils literal"><span class="pre">Map</span></tt>)</p>
<p class="last">JavaBeanを指定した場合はプロパティ名がリクエストパラメータ名となり、<tt class="docutils literal"><span class="pre">Map</span></tt>を指定した場合はキー名がリクエストパラメータとなる。</p>
</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">指定されたオブジェクトのフィールド値は、
<tt class="docutils literal"><span class="pre">org.springframework.format.support.DefaultFormattingConversionService</span></tt>の <tt class="docutils literal"><span class="pre">convert</span></tt>メソッドを使用して文字列に変換される。
<tt class="docutils literal"><span class="pre">ConversionService</span></tt>については、
<a class="reference external" href="http://docs.spring.io/spring/docs/4.1.2.RELEASE/spring-framework-reference/html/validation.html#core-convert">Spring Framework Reference Documentation(Spring Type Conversion)</a>を参照されたい。</p>
</div>
</div></blockquote>
<p><strong>戻り値</strong></p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="11%" />
<col width="22%" />
<col width="67%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">項番</th>
<th class="head">型</th>
<th class="head">説明</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><ol class="first last arabic simple">
<li></li>
</ol>
</td>
<td><tt class="docutils literal"><span class="pre">java.lang.String</span></tt></td>
<td><p class="first">引数で指定されたオブジェクトを元に生成したクエリ文字列(UTF-8でURLエンコーディング済みの文字列)</p>
<p class="last">引数で指定されたオブジェクトが、JavaBean又は<tt class="docutils literal"><span class="pre">Map</span></tt>以外の場合は、空文字(<tt class="docutils literal"><span class="pre">&quot;&quot;</span></tt>)を返却する。</p>
</td>
</tr>
</tbody>
</table>
</div></blockquote>
</div>
<div class="section" id="id8">
<h4>7.3.2.7.2. f:query() 使用方法<a class="headerlink" href="#id8" title="Permalink to this headline">¶</a></h4>
<p><tt class="docutils literal"><span class="pre">f:query()</span></tt>の使用方法については、「<a class="reference internal" href="../ArchitectureInDetail/Pagination.html#pagination-how-to-use-make-jsp-basic-search-criteria"><em>ページリンクで検索条件を引き継ぐ</em></a>」を参照されたい。
ここでは、ページネーションリンクを使用してページを切り替える際に、検索条件を引き継ぐ際の手段として、本関数を使用している。
また、関数の仕様と注意点についても記載しているので、これについても一読されたい。</p>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
</div>
<div class="section" id="f-u">
<span id="taglibandelfunctionshowtouseelfunctionu"></span><h3>7.3.2.8. f:u()<a class="headerlink" href="#f-u" title="Permalink to this headline">¶</a></h3>
<p><tt class="docutils literal"><span class="pre">f:u()</span></tt>は、引数に指定された文字列をUTF-8でURLエンコーディングするEL Functionである。</p>
<p>本関数は、クエリ文字列内のパラメータ値に設定する値をURLエンコーディングするために用意している。
URLエンコーディング仕様は、「<a class="reference internal" href="#taglibandelfunctionshowtouseelfunctionquery"><em>f:query()</em></a>」を参照されたい。</p>
<div class="section" id="id9">
<h4>7.3.2.8.1. f:u() 関数仕様<a class="headerlink" href="#id9" title="Permalink to this headline">¶</a></h4>
<p><strong>引数</strong></p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="11%" />
<col width="22%" />
<col width="67%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">項番</th>
<th class="head">型</th>
<th class="head">説明</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><ol class="first last arabic simple">
<li></li>
</ol>
</td>
<td><tt class="docutils literal"><span class="pre">java.lang.String</span></tt></td>
<td>URLエンコードが必要な文字が含まれる可能性がある文字列</td>
</tr>
</tbody>
</table>
</div></blockquote>
<p><strong>戻り値</strong></p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="11%" />
<col width="22%" />
<col width="67%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">項番</th>
<th class="head">型</th>
<th class="head">説明</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><ol class="first last arabic simple">
<li></li>
</ol>
</td>
<td><tt class="docutils literal"><span class="pre">java.lang.String</span></tt></td>
<td><p class="first">URLエンコード後の文字列</p>
<p class="last">引数で指定さらた文字列が<tt class="docutils literal"><span class="pre">null</span></tt>の場合は、空文字(<tt class="docutils literal"><span class="pre">&quot;&quot;</span></tt>)を返却する。</p>
</td>
</tr>
</tbody>
</table>
</div></blockquote>
</div>
<div class="section" id="id10">
<h4>7.3.2.8.2. f:u() 使用方法<a class="headerlink" href="#id10" title="Permalink to this headline">¶</a></h4>
<div class="highlight-jsp"><div class="highlight"><pre><span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">&quot;url&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&quot;https://search.yahoo.com/search?p=${f:u(bean.searchString)}&quot;</span><span class="nt">&gt;</span>  <span class="c">&lt;!-- (1) --&gt;</span>
        Go to Yahoo Search
    <span class="nt">&lt;/a&gt;</span>
<span class="nt">&lt;/div&gt;</span>
</pre></div>
</div>
<table border="1" class="docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">項番</th>
<th class="head">説明</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(1)</div>
</div>
</td>
<td>上記例では、本関数を使用してURLエンコードした値を検索サイトのリクエストパラメータに設定している。</td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
</div>
<div class="section" id="f-link">
<span id="taglibandelfunctionshowtouseelfunctionlink"></span><h3>7.3.2.9. f:link()<a class="headerlink" href="#f-link" title="Permalink to this headline">¶</a></h3>
<p><tt class="docutils literal"><span class="pre">f:link()</span></tt>は、引数に指定されたURLにジャンプするためのハイパーリンク(<tt class="docutils literal"><span class="pre">&lt;a&gt;</span></tt>タグ)を出力するEL Functionである。</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">本関数では、URLエンコーディングや特殊文字のエスケープ処理は行われない点に注意すること。</p>
</div>
<div class="section" id="id11">
<h4>7.3.2.9.1. f:link() 関数仕様<a class="headerlink" href="#id11" title="Permalink to this headline">¶</a></h4>
<p><strong>引数</strong></p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="11%" />
<col width="22%" />
<col width="67%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">項番</th>
<th class="head">型</th>
<th class="head">説明</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><ol class="first last arabic simple">
<li></li>
</ol>
</td>
<td><tt class="docutils literal"><span class="pre">java.lang.String</span></tt></td>
<td><p class="first">リンク先のURL文字列</p>
<p class="last">URL文字列は、HTTP又はHTTPSスキーマのURL形式である必要がある。
（e.g : <tt class="docutils literal"><span class="pre">http://hostname:80/terasoluna/global.ex?id=123</span></tt>）</p>
</td>
</tr>
</tbody>
</table>
</div></blockquote>
<p><strong>戻り値</strong></p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="11%" />
<col width="22%" />
<col width="67%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">項番</th>
<th class="head">型</th>
<th class="head">説明</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><ol class="first last arabic simple">
<li></li>
</ol>
</td>
<td><tt class="docutils literal"><span class="pre">java.lang.String</span></tt></td>
<td><p class="first">引数に指定された文字列を元に生成したハイパーリンク(<tt class="docutils literal"><span class="pre">&lt;a&gt;</span></tt>タグ)</p>
<p>引数に指定された文字列が、</p>
<ul class="simple">
<li>引数で指定さらた文字列が<tt class="docutils literal"><span class="pre">null</span></tt>の場合は、空文字(<tt class="docutils literal"><span class="pre">&quot;&quot;</span></tt>)</li>
<li>HTTP又はHTTPSスキーマのURL形式でない場合は、ハイパーリンクを生成せず入力値の文字列</li>
</ul>
<p class="last">を返却する。</p>
</td>
</tr>
</tbody>
</table>
</div></blockquote>
</div>
<div class="section" id="id12">
<h4>7.3.2.9.2. f:link() 使用方法<a class="headerlink" href="#id12" title="Permalink to this headline">¶</a></h4>
<p><strong>実装例</strong></p>
<div class="highlight-jsp"><div class="highlight"><pre><span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">&quot;link&quot;</span><span class="nt">&gt;</span>
    ${f:link(bean.httpUrl)}  <span class="c">&lt;!-- (1) --&gt;</span>
<span class="nt">&lt;/div&gt;</span>
</pre></div>
</div>
<p><strong>出力例</strong></p>
<div class="highlight-html"><div class="highlight"><pre><span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">&quot;link&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&quot;http://terasoluna.org/&quot;</span><span class="nt">&gt;</span>http://terasoluna.org/<span class="nt">&lt;/a&gt;</span>  <span class="c">&lt;!-- (2) --&gt;</span>
<span class="nt">&lt;/div&gt;</span>
</pre></div>
</div>
<table border="1" class="docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">項番</th>
<th class="head">説明</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">引数に指定されたURL文字列からハイパーリンクを生成する。</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="first last line-block">
<div class="line">(2)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">引数で指定したURL文字列が、<tt class="docutils literal"><span class="pre">&lt;a&gt;</span></tt>タグの <tt class="docutils literal"><span class="pre">href</span></tt>属性と、ハイパーリンクのリンク名に設定される。</div>
</div>
</td>
</tr>
</tbody>
</table>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p>URLにリクエストパラメータを付加する場合は、リクエストパラメータの値はURLエンコーディングする必要がある。
リクエストパラメータを付加する場合は、<tt class="docutils literal"><span class="pre">f:query()</span></tt>関数や<tt class="docutils literal"><span class="pre">f:u()</span></tt>関数を使用して、
リクエストパラメータの値を適切にURLエンコーディングすること。</p>
<p class="last">また、戻り値の説明でも記載しているが、引数のURL文字列の形式が適切でない場合は、
ハイパーリンクを生成せず入力値の文字列を返却する仕様としている。
そのため、引数に指定するURL文字列としてユーザからの入力値を使用する場合は、
文字列出力処理と同様のHTML特殊文字のエスケープ処理(<a class="reference internal" href="../Security/XSS.html"><em>XSS対策</em></a>)が必要になるケースがある。</p>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
</div>
<div class="section" id="f-br">
<span id="taglibandelfunctionshowtouseelfunctionbr"></span><h3>7.3.2.10. f:br()<a class="headerlink" href="#f-br" title="Permalink to this headline">¶</a></h3>
<p><tt class="docutils literal"><span class="pre">f:br()</span></tt>は、引数に指定された文字列内の改行コード（<tt class="docutils literal"><span class="pre">CRLF</span></tt>, <tt class="docutils literal"><span class="pre">LF</span></tt>, <tt class="docutils literal"><span class="pre">CR</span></tt>）を<tt class="docutils literal"><span class="pre">&lt;br</span> <span class="pre">/&gt;</span></tt>タグに変換するEL Functionである。</p>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p>改行コードを含む文字列をブラウザ上の表示として改行する場合は、改行コードを<tt class="docutils literal"><span class="pre">&lt;br</span> <span class="pre">/&gt;</span></tt>タグに変換する必要がある。</p>
<p class="last">例えば、入力画面のテキストアリア(<tt class="docutils literal"><span class="pre">&lt;textarea&gt;</span></tt>)で入力された文字列を、
確認画面や完了画面などで入力さらた状態のまま表示する際に、本関数を使用するとよい。</p>
</div>
<div class="section" id="id13">
<h4>7.3.2.10.1. f:br() 関数仕様<a class="headerlink" href="#id13" title="Permalink to this headline">¶</a></h4>
<p><strong>引数</strong></p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="11%" />
<col width="22%" />
<col width="67%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">項番</th>
<th class="head">型</th>
<th class="head">説明</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><ol class="first last arabic simple">
<li></li>
</ol>
</td>
<td><tt class="docutils literal"><span class="pre">java.lang.String</span></tt></td>
<td>改行コードが含まれる可能性がある文字列</td>
</tr>
</tbody>
</table>
</div></blockquote>
<p><strong>戻り値</strong></p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="11%" />
<col width="22%" />
<col width="67%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">項番</th>
<th class="head">型</th>
<th class="head">説明</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><ol class="first last arabic simple">
<li></li>
</ol>
</td>
<td><tt class="docutils literal"><span class="pre">java.lang.String</span></tt></td>
<td><p class="first">変換後の文字列</p>
<p class="last">引数で指定さらた文字列が<tt class="docutils literal"><span class="pre">null</span></tt>の場合は、空文字(<tt class="docutils literal"><span class="pre">&quot;&quot;</span></tt>)を返却する。</p>
</td>
</tr>
</tbody>
</table>
</div></blockquote>
</div>
<div class="section" id="id14">
<h4>7.3.2.10.2. f:br() 使用方法<a class="headerlink" href="#id14" title="Permalink to this headline">¶</a></h4>
<div class="highlight-jsp"><div class="highlight"><pre><span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">&quot;text&quot;</span><span class="nt">&gt;</span>
    ${f:br(f:h(bean.text))}&quot;&gt;  <span class="c">&lt;!-- (1) --&gt;</span>
<span class="nt">&lt;/div&gt;</span>
</pre></div>
</div>
<table border="1" class="docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">項番</th>
<th class="head">説明</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(1)</div>
</div>
</td>
<td>引数で指定された文字列内の改行コードを<tt class="docutils literal"><span class="pre">&lt;br</span> <span class="pre">/&gt;</span></tt>タグに変換することで、ブラウザ上の表示を改行する。</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>文字列を画面上に表示する際は、「<a class="reference internal" href="../Security/XSS.html"><em>XSS対策</em></a>」としてHTML特殊文字をエスケープする必要がある。</p>
<p><tt class="docutils literal"><span class="pre">f:br()</span></tt>関数を使用して改行コードを<tt class="docutils literal"><span class="pre">&lt;br</span> <span class="pre">/&gt;</span></tt>タグに変換する場合は、
上記例のように、HTML特殊文字をエスケープした文字列を<tt class="docutils literal"><span class="pre">f:br()</span></tt>の引数として渡す必要がある。</p>
<p class="last"><tt class="docutils literal"><span class="pre">f:br()</span></tt>を使用して改行コードを<tt class="docutils literal"><span class="pre">&lt;br</span> <span class="pre">/&gt;</span></tt>タグに変換した文字列を、
<tt class="docutils literal"><span class="pre">f:h()</span></tt>関数の引数に渡すと、<tt class="docutils literal"><span class="pre">&quot;&lt;br</span> <span class="pre">/&gt;&quot;</span></tt>という文字がブラウザ上に表示されてしまうため、
関数を呼び出す順番に注意すること。</p>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
</div>
<div class="section" id="f-cut">
<span id="taglibandelfunctionshowtouseelfunctioncut"></span><h3>7.3.2.11. f:cut()<a class="headerlink" href="#f-cut" title="Permalink to this headline">¶</a></h3>
<p><tt class="docutils literal"><span class="pre">f:cut()</span></tt>は、引数に指定された文字列の先頭から、引数で指定された文字数までの文字列を切り出すEL Functionである。</p>
<div class="section" id="id15">
<h4>7.3.2.11.1. f:cut() 関数仕様<a class="headerlink" href="#id15" title="Permalink to this headline">¶</a></h4>
<p><strong>引数</strong></p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="11%" />
<col width="22%" />
<col width="67%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">項番</th>
<th class="head">型</th>
<th class="head">説明</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><ol class="first last arabic simple">
<li></li>
</ol>
</td>
<td><tt class="docutils literal"><span class="pre">java.lang.String</span></tt></td>
<td>切り出し元となる文字列</td>
</tr>
<tr class="row-odd"><td><ol class="first last arabic simple" start="2">
<li></li>
</ol>
</td>
<td><tt class="docutils literal"><span class="pre">int</span></tt></td>
<td>切り出す文字数</td>
</tr>
</tbody>
</table>
</div></blockquote>
<p><strong>戻り値</strong></p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="11%" />
<col width="22%" />
<col width="67%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">項番</th>
<th class="head">型</th>
<th class="head">説明</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><ol class="first last arabic simple">
<li></li>
</ol>
</td>
<td><tt class="docutils literal"><span class="pre">java.lang.String</span></tt></td>
<td><p class="first">切り出した文字列(指定された文字数を超えている部分が破棄された文字列)</p>
<p class="last">引数で指定さらた文字列が<tt class="docutils literal"><span class="pre">null</span></tt>の場合は、空文字(<tt class="docutils literal"><span class="pre">&quot;&quot;</span></tt>)を返却する。</p>
</td>
</tr>
</tbody>
</table>
</div></blockquote>
</div>
<div class="section" id="id16">
<h4>7.3.2.11.2. f:cut() 使用方法<a class="headerlink" href="#id16" title="Permalink to this headline">¶</a></h4>
<div class="highlight-jsp"><div class="highlight"><pre><span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">&quot;cut&quot;</span><span class="nt">&gt;</span>
    ${f:h(f:cut(bean.originText, 5))}  <span class="c">&lt;!-- (1) --&gt;</span>
<span class="nt">&lt;/div&gt;</span>
</pre></div>
</div>
<table border="1" class="docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">項番</th>
<th class="head">説明</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">上記例では、引数に指定した文字列の先頭5文字を切り出して、画面上に表示している。</div>
</div>
</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">切り出した文字列を画面上に表示する際は、「<a class="reference internal" href="../Security/XSS.html"><em>XSS対策</em></a>」としてHTML特殊文字をエスケープする必要がある。
上記例では、<tt class="docutils literal"><span class="pre">f:h()</span></tt>関数を使用してエスケープしている。</p>
</div>
</div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="Nexus.html" title="7.4. NEXUSによるMavenリポジトリの管理"
             >next</a> |</li>
        <li class="right" >
          <a href="CreateProjectFromBlank.html" title="7.2. Blankプロジェクトから新規プロジェクト作成"
             >previous</a> |</li>
        <li><a href="../index.html">TERASOLUNA Global Framework Development Guideline 1.0.2.RELEASE documentation</a> &raquo;</li>
          <li><a href="index.html" >7. Appendix</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2013-2015, NTT DATA.
    Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.2.Theme by <a href="http://github.com/vkvn">vkvn</a>
    </div>
    
    <script>
    
    $(function() {
    	var $sidebar	= $('.sphinxsidebar'),
    		$window		= $(window),
    		offset		= $sidebar.offset(),
    		topPadding	= 3,
    		$scroll		= $('#scroll');
    	
    	$window.scroll(function() {
    		if ($scroll.is(':checked')) {
				if ($window.scrollTop() > offset.top) {
					$sidebar.stop().animate({
						marginTop:$window.scrollTop() - offset.top + topPadding
					});
				} else {
					$sidebar.stop().animate({
						marginTop:0
					});
				}
			}
		});
    	
    	var $navList = $('ul:first', $sidebar);
    	$('li:first', $navList).addClass('open');
    	
    	$navList.treeview({
    		persist: "location",
    		collapsed: true,
    		unique: false
    	});
    	
	});
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-46550814-1', 'terasolunaorg.github.io');
    ga('send', 'pageview');
    </script>
  </body>
</html>