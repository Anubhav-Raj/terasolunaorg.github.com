<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>5.13. Internationalization &mdash; TERASOLUNA Global Framework Development Guideline 1.1.0-SNAPSHOT documentation</title>
    
    <link rel="stylesheet" href="../_static/solar.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '1.1.0-SNAPSHOT',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="top" title="TERASOLUNA Global Framework Development Guideline 1.1.0-SNAPSHOT documentation" href="../index.html" />
    <link rel="up" title="5. Architecture in Detail - TERASOLUNA Global Framework" href="index.html" />
    <link rel="next" title="5.14. Codelist" href="Codelist.html" />
    <link rel="prev" title="5.12. Double Submit Protection" href="DoubleSubmitProtection.html" /><script src="../_static/jquery.treeview.js" type="text/javascript"></script>
<!-- <link href='http://fonts.googleapis.com/css?family=Source+Code+Pro|Open+Sans:300italic,400italic,700italic,400,300,700' rel='stylesheet' type='text/css'> -->
<link href="../_static/solarized-dark.css" rel="stylesheet">
<link href="../_static/jquery.treeview.css" rel="stylesheet">
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="Codelist.html" title="5.14. Codelist"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="DoubleSubmitProtection.html" title="5.12. Double Submit Protection"
             accesskey="P">previous</a> |</li>
        <li><a href="../index.html">TERASOLUNA Global Framework Development Guideline 1.1.0-SNAPSHOT documentation</a> &raquo;</li>
          <li><a href="index.html" accesskey="U">5. Architecture in Detail - TERASOLUNA Global Framework</a> &raquo;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper"><label><input id="scroll" type="checkbox" checked> scroll sidebar</label>

  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">5.13. Internationalization</a><ul>
<li><a class="reference internal" href="#overview">5.13.1. Overview</a><ul>
<li><a class="reference internal" href="#changing-locale-as-per-user-terminal-or-browser-settings">5.13.1.1. Changing locale as per user terminal (or browser) settings</a></li>
<li><a class="reference internal" href="#for-dynamically-changing-locale-depending-on-screen-operations">5.13.1.2. For dynamically changing locale depending on screen operations</a></li>
</ul>
</li>
</ul>
</li>
</ul>


  <h4>Previous topic</h4>
  <p class="topless"><a href="DoubleSubmitProtection.html"
                        title="previous chapter">5.12. Double Submit Protection</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="Codelist.html"
                        title="next chapter">5.14. Codelist</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../_sources/ArchitectureInDetail/Internationalization.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="internationalization">
<h1>5.13. Internationalization<a class="headerlink" href="#internationalization" title="Permalink to this headline">¶</a></h1>
<div class="contents local topic" id="table-of-contents">
<p class="topic-title first">Table of Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#overview" id="id1">Overview</a><ul>
<li><a class="reference internal" href="#changing-locale-as-per-user-terminal-or-browser-settings" id="id2">Changing locale as per user terminal (or browser) settings</a></li>
<li><a class="reference internal" href="#for-dynamically-changing-locale-depending-on-screen-operations" id="id3">For dynamically changing locale depending on screen operations</a></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="overview">
<h2><a class="toc-backref" href="#id1">5.13.1. Overview</a><a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h2>
<p>Internationalization is a process wherein the display of labels and messages in an application is not fixed to a specific language. It supports multiple languages. The language switching can be achieved by specifying a unit called &#8220;Locale&#8221; expressing language, country and region.</p>
<p>This chapter explains different methods for internationalization of messages.</p>
<div class="line-block">
<div class="line">The following points should be noted to support internationalization.</div>
</div>
<ul class="simple">
<li>Text elements such as status, messages and labels of GUI components etc. should not be hardcoded in the program.</li>
<li>These elements should be stored in external data other than program data.</li>
</ul>
<p>For implementing internationalization, locale needs to be stored. Locale can mainly be stored in,</p>
<ul class="simple">
<li>Session</li>
<li>Cookie</li>
</ul>
<p>The image of changing locale is as follows:</p>
<blockquote>
<div><div class="figure">
<a class="reference internal image-reference" href="../_images/i18n_change_image.png"><img alt="locale change image" src="../_images/i18n_change_image.png" style="width: 40%;" /></a>
</div>
</div></blockquote>
<p>The location of storing locale is decided depending on the implementation method.</p>
<p>This chapter states various rules to use internationalization and the recommended implementation methods.</p>
<blockquote>
<div><div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The most commonly known abbreviation of internationalization is i18n.
Internationalization is abbreviated as i18n because the number of letters between the first &#8220;i&#8221; and
the last &#8220;n&#8221; is 18 i.e. &#8220;nternationalizatio&#8221;.</p>
</div>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">For internationalization of Codelist, refer to <a class="reference internal" href="Codelist.html"><em>Codelist</em></a>.</p>
</div>
</div></blockquote>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>How to use</p>
<div class="section" id="changing-locale-as-per-user-terminal-or-browser-settings">
<h3><a class="toc-backref" href="#id2">5.13.1.1. Changing locale as per user terminal (or browser) settings</a><a class="headerlink" href="#changing-locale-as-per-user-terminal-or-browser-settings" title="Permalink to this headline">¶</a></h3>
<div class="line-block">
<div class="line">By using Spring <tt class="docutils literal"><span class="pre">org.springframework.context.support.ResourceBundleMessageSource</span></tt>, locale can be changed as per the settings of user terminal (or browser).</div>
<div class="line">Here, internationalization when MessageSource is being used is explained.</div>
</div>
<blockquote>
<div><div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">For MessageSource details and definition methods, refer to <a class="reference internal" href="MessageManagement.html"><em>Message Management</em></a>.</p>
</div>
</div></blockquote>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p><strong>bean definition file</strong></p>
<ul class="simple">
<li>applicationContext.xml</li>
</ul>
<blockquote>
<div><div class="highlight-xml"><div class="highlight"><pre><span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">&quot;messageSource&quot;</span>
    <span class="na">class=</span><span class="s">&quot;org.springframework.context.support.ResourceBundleMessageSource&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;basenames&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;list&gt;</span>
            <span class="nt">&lt;value&gt;</span>i18n/application-messages<span class="nt">&lt;/value&gt;</span>  <span class="c">&lt;!-- (1) --&gt;</span>
        <span class="nt">&lt;/list&gt;</span>
    <span class="nt">&lt;/property&gt;</span>
<span class="nt">&lt;/bean&gt;</span>
</pre></div>
</div>
<table border="1" class="docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><div class="first last line-block">
<div class="line">Sr. No.</div>
</div>
</th>
<th class="head"><div class="first last line-block">
<div class="line">Description</div>
</div>
</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Specify i18n/application-messages as base name of properties file.</div>
<div class="line">It is recommended to store message properties file under i18n directory to support internationalization.</div>
</div>
</td>
</tr>
</tbody>
</table>
</div></blockquote>
<ul class="simple">
<li>spring-mvc.xml</li>
</ul>
<blockquote>
<div><div class="highlight-xml"><div class="highlight"><pre><span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">&quot;localeResolver&quot;</span>
    <span class="na">class=</span><span class="s">&quot;org.springframework.web.servlet.i18n.AcceptHeaderLocaleResolver&quot;</span> <span class="nt">/&gt;</span> <span class="c">&lt;!-- (1) --&gt;</span>
</pre></div>
</div>
<table border="1" class="docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><div class="first last line-block">
<div class="line">Sr. No.</div>
</div>
</th>
<th class="head"><div class="first last line-block">
<div class="line">Description</div>
</div>
</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Specify <tt class="docutils literal"><span class="pre">org.springframework.web.servlet.i18n.AcceptHeaderLocaleResolver</span></tt> in id attribute &#8220;localeResolver&#8221; of bean tag.</div>
<div class="line">If this localeResolver is used, HTTP header &#8220;accept-language&#8221; is added for each request and locale gets specified.</div>
</div>
</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">When localeResolver is not set, <tt class="docutils literal"><span class="pre">org.springframework.web.servlet.i18n.AcceptHeaderLocaleResolver</span></tt> is used by default; hence localeResolver need not be set.</p>
</div>
</div></blockquote>
<p><strong>File path</strong></p>
<blockquote>
<div><div class="figure">
<a class="reference internal image-reference" href="../_images/i18n_properties_filepath.png"><img alt="properties filepath" src="../_images/i18n_properties_filepath.png" style="width: 40%;" /></a>
</div>
</div></blockquote>
<div class="line-block">
<div class="line">File name should be defined in <tt class="file docutils literal"><span class="pre">application-messages_XX.properties</span></tt> format. Specify locale in XX portion.</div>
<div class="line">When locale resolved using <tt class="docutils literal"><span class="pre">LocaleResolver</span></tt> is zh, <tt class="file docutils literal"><span class="pre">application-messages_zh.properties</span></tt> is used, and</div>
<div class="line">when locale resolved using <tt class="docutils literal"><span class="pre">LocaleResolver</span></tt> is ja, <tt class="file docutils literal"><span class="pre">application-messages_ja.properties</span></tt> is used.</div>
<div class="line">When properties file corresponding to locale resolved using <tt class="docutils literal"><span class="pre">LocaleResolver</span></tt> does not exist, <tt class="file docutils literal"><span class="pre">application-messages.properties</span></tt> is used by default. (&#8220;_XX&#8221; portion does not exist in file name)</div>
<div class="line">Note the following while using <tt class="file docutils literal"><span class="pre">application-messages.properties</span></tt>.</div>
</div>
<ul class="simple">
<li>The messages defined in <tt class="file docutils literal"><span class="pre">application-messages.properties</span></tt> should be created in default language.</li>
<li><strong>Make sure you create</strong> <tt class="file docutils literal"><span class="pre">application-messages.properties</span></tt>. If it does not exist, messages cannot be fetched from MessageSource and JspTagException occurs while setting the messages in JSP.</li>
</ul>
<blockquote>
<div><div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">For description of message properties file, refer to <a class="reference internal" href="MessageManagement.html"><em>Message Management</em></a>.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>In locale determination, locale is verified until properties file of the corresponding locale is found in the following order.</p>
<ol class="arabic simple">
<li>Locale specified in HTTP header &#8220;accept-language&#8221; of request</li>
<li>Locale specified in JVM of application server (may not be set in some cases)</li>
<li>Locale specified in OS of application server</li>
</ol>
<p class="last">It is frequently misunderstood that when properties file of locale corresponding to value of HTTP header &#8220;accept-language&#8221; of request does not exist, default properties file is used.
In actual scenario, locale specified in the application server in subsequent process is verified and even then the properties file of the corresponding locale is not found, default properties file is used.</p>
</div>
</div></blockquote>
<p>Example of setting message definition is as follows:</p>
<p><strong>Properties file</strong></p>
<ul class="simple">
<li>application-messages.properties</li>
</ul>
<blockquote>
<div><div class="highlight-properties"><div class="highlight"><pre><span class="na">title.admin.top</span> <span class="o">=</span> <span class="s">Admin Top</span>
</pre></div>
</div>
</div></blockquote>
<ul class="simple">
<li>application-messages_jp.properties</li>
</ul>
<blockquote>
<div><div class="highlight-properties"><div class="highlight"><pre><span class="na">title.admin.top</span> <span class="o">=</span> <span class="s">管理画面 Top</span>
</pre></div>
</div>
</div></blockquote>
<p><strong>JSP file</strong></p>
<ul class="simple">
<li>include.jsp(Common jsp file to be included)</li>
</ul>
<blockquote>
<div><div class="highlight-jsp"><div class="highlight"><pre><span class="k">&lt;%@</span> <span class="n">page</span> <span class="n">session</span><span class="o">=</span><span class="s">&quot;false&quot;</span><span class="k">%&gt;</span>
<span class="k">&lt;%@</span> <span class="n">taglib</span> <span class="n">uri</span><span class="o">=</span><span class="s">&quot;http://java.sun.com/jsp/jstl/core&quot;</span> <span class="n">prefix</span><span class="o">=</span><span class="s">&quot;c&quot;</span><span class="k">%&gt;</span>
<span class="k">&lt;%@</span> <span class="n">taglib</span> <span class="n">uri</span><span class="o">=</span><span class="s">&quot;http://java.sun.com/jsp/jstl/fmt&quot;</span> <span class="n">prefix</span><span class="o">=</span><span class="s">&quot;fmt&quot;</span><span class="k">%&gt;</span>
<span class="k">&lt;%@</span> <span class="n">taglib</span> <span class="n">uri</span><span class="o">=</span><span class="s">&quot;http://www.springframework.org/tags&quot;</span> <span class="n">prefix</span><span class="o">=</span><span class="s">&quot;spring&quot;</span><span class="k">%&gt;</span>  <span class="c">&lt;!-- (1) --&gt;</span>
<span class="k">&lt;%@</span> <span class="n">taglib</span> <span class="n">uri</span><span class="o">=</span><span class="s">&quot;http://www.springframework.org/tags/form&quot;</span> <span class="n">prefix</span><span class="o">=</span><span class="s">&quot;form&quot;</span><span class="k">%&gt;</span>
<span class="k">&lt;%@</span> <span class="n">taglib</span> <span class="n">uri</span><span class="o">=</span><span class="s">&quot;http://www.springframework.org/security/tags&quot;</span> <span class="n">prefix</span><span class="o">=</span><span class="s">&quot;sec&quot;</span><span class="k">%&gt;</span>
<span class="k">&lt;%@</span> <span class="n">taglib</span> <span class="n">uri</span><span class="o">=</span><span class="s">&quot;http://terasoluna.org/functions&quot;</span> <span class="n">prefix</span><span class="o">=</span><span class="s">&quot;f&quot;</span><span class="k">%&gt;</span>
<span class="k">&lt;%@</span> <span class="n">taglib</span> <span class="n">uri</span><span class="o">=</span><span class="s">&quot;http://terasoluna.org/tags&quot;</span> <span class="n">prefix</span><span class="o">=</span><span class="s">&quot;t&quot;</span><span class="k">%&gt;</span>
</pre></div>
</div>
<table border="1" class="docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><div class="first last line-block">
<div class="line">Sr. No.</div>
</div>
</th>
<th class="head"><div class="first last line-block">
<div class="line">Description</div>
</div>
</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">When message is to be output in JSP, it is output using Spring tag library; hence custom tag needs to be defined.</div>
<div class="line"><tt class="docutils literal"><span class="pre">&lt;%&#64;taglib</span> <span class="pre">uri=&quot;http://www.springframework.org/tags&quot;</span> <span class="pre">prefix=&quot;spring&quot;%&gt;</span></tt>  should be defined.</div>
</div>
</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">For details on common jsp files to be included, refer to <a class="reference internal" href="../ImplementationAtEachLayer/ApplicationLayer.html#view-jsp-include-label"><em>Creating common JSP for include</em></a>.</p>
</div>
</div></blockquote>
<ul class="simple">
<li>JSP file for screen display</li>
</ul>
<blockquote>
<div><div class="highlight-java"><div class="highlight"><pre><span class="o">&lt;</span><span class="nl">spring:</span><span class="n">message</span> <span class="n">code</span><span class="o">=</span><span class="s">&quot;title.admin.top&quot;</span> <span class="o">/&gt;</span>  <span class="o">&lt;!--</span> <span class="o">(</span><span class="mi">1</span><span class="o">)</span> <span class="o">--&gt;</span>
</pre></div>
</div>
<table border="1" class="docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><div class="first last line-block">
<div class="line">Sr. No.</div>
</div>
</th>
<th class="head"><div class="first last line-block">
<div class="line">Description</div>
</div>
</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Output the message using <tt class="docutils literal"><span class="pre">&lt;spring:message&gt;</span></tt>  which is a Spring tag library of JSP.</div>
<div class="line">In code attribute, set the key specified in properties.</div>
<div class="line">In this example, if locale is ja, &#8220;管理画面 Top&#8221; is output and for other locales, &#8220;Admin Top&#8221; is output.</div>
</div>
</td>
</tr>
</tbody>
</table>
</div></blockquote>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
<div class="section" id="for-dynamically-changing-locale-depending-on-screen-operations">
<h3><a class="toc-backref" href="#id3">5.13.1.2. For dynamically changing locale depending on screen operations</a><a class="headerlink" href="#for-dynamically-changing-locale-depending-on-screen-operations" title="Permalink to this headline">¶</a></h3>
<div class="line-block">
<div class="line">The method of dynamically changing the locale depending on screen operations etc. is effective in case of selecting a specific language irrespective of user terminal (browser) settings.</div>
<div class="line"><br /></div>
<div class="line">This can be implemented using <tt class="docutils literal"><span class="pre">org.springframework.web.servlet.i18n.LocaleChangeInterceptor</span></tt>.</div>
<div class="line">LocaleChangeInterceptor stores the data in <tt class="docutils literal"><span class="pre">org.springframework.web.servlet.LocaleResolver</span></tt></div>
<div class="line">using the locale value specified in request parameter.</div>
</div>
<div class="line-block">
<div class="line">Select the implementation class of LocaleResolver from the following table as per the storage location  of locale.</div>
</div>
<blockquote>
<div><table border="1" class="docutils">
<caption><strong>Types of LocaleResolver for using Interceptor</strong></caption>
<colgroup>
<col width="5%" />
<col width="60%" />
<col width="35%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">No</th>
<th class="head">Implementation class</th>
<th class="head">How to store locale</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><ol class="first last arabic simple">
<li></li>
</ol>
</td>
<td><tt class="docutils literal"><span class="pre">org.springframework.web.servlet.i18n.SessionLocaleResolver</span></tt></td>
<td><div class="first last line-block">
<div class="line">Store in server</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><ol class="first last arabic simple" start="2">
<li></li>
</ol>
</td>
<td><tt class="docutils literal"><span class="pre">org.springframework.web.servlet.i18n.CookieLocaleResolver</span></tt></td>
<td><div class="first last line-block">
<div class="line">Store in client</div>
</div>
</td>
</tr>
</tbody>
</table>
</div></blockquote>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">When <tt class="docutils literal"><span class="pre">org.springframework.web.servlet.i18n.AcceptHeaderLocaleResolver</span></tt> is used in LocaleResolver,
locale cannot be changed dynamically using <tt class="docutils literal"><span class="pre">org.springframework.web.servlet.i18n.LocaleChangeInterceptor</span></tt>.</p>
</div>
<p><strong>Bean definition file</strong></p>
<p>In case of SessionLocaleResolver</p>
<ul class="simple">
<li>spring-mvc.xml</li>
</ul>
<blockquote>
<div><div class="highlight-xml"><div class="highlight"><pre><span class="c">&lt;!-- omitted --&gt;</span>
<span class="nt">&lt;mvc:interceptors&gt;</span>
  <span class="nt">&lt;mvc:interceptor&gt;</span>
    <span class="nt">&lt;mvc:mapping</span> <span class="na">path=</span><span class="s">&quot;/**&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;mvc:exclude-mapping</span> <span class="na">path=</span><span class="s">&quot;/resources/**&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;mvc:exclude-mapping</span> <span class="na">path=</span><span class="s">&quot;/**/*.html&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;bean</span>
      <span class="na">class=</span><span class="s">&quot;org.springframework.web.servlet.i18n.LocaleChangeInterceptor&quot;</span><span class="nt">&gt;</span>  <span class="c">&lt;!-- (1) --&gt;</span>
    <span class="nt">&lt;/bean&gt;</span>
        <span class="c">&lt;!-- omitted --&gt;</span>
  <span class="nt">&lt;/mvc:interceptor&gt;</span>
<span class="nt">&lt;/mvc:interceptors&gt;</span>

<span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">&quot;localeResolver&quot;</span> <span class="na">class=</span><span class="s">&quot;org.springframework.web.servlet.i18n.SessionLocaleResolver&quot;</span><span class="nt">&gt;</span>  <span class="c">&lt;!-- (2) --&gt;</span>
    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;defaultLocale&quot;</span> <span class="na">value=</span><span class="s">&quot;en&quot;</span><span class="nt">/&gt;</span>  <span class="c">&lt;!-- (3) --&gt;</span>
<span class="nt">&lt;/bean&gt;</span>
</pre></div>
</div>
<table border="1" class="docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><div class="first last line-block">
<div class="line">Sr. No.</div>
</div>
</th>
<th class="head"><div class="first last line-block">
<div class="line">Description</div>
</div>
</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Define <tt class="docutils literal"><span class="pre">org.springframework.web.servlet.i18n.LocaleChangeInterceptor</span></tt> in interceptor of Spring MVC.</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="first last line-block">
<div class="line">(2)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Define id attribute of bean tag in &#8220;localeResolver&#8221; and specify the class wherein <tt class="docutils literal"><span class="pre">org.springframework.web.servlet.LocaleResolver</span></tt> is implemented.</div>
<div class="line">In this example, <tt class="docutils literal"><span class="pre">org.springframework.web.servlet.i18n.SessionLocaleResolver</span></tt> that stores locale in session is specified.</div>
<div class="line">id attribute of bean tag should be set as &#8220;localeResolver&#8221;.</div>
<div class="line">By performing these settings, LocaleResolver used in <tt class="docutils literal"><span class="pre">org.springframework.web.servlet.i18n.LocaleChangeInterceptor</span></tt> gets set in LocaleResolver of (3).</div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(3)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">When locale is not specified in request parameter, locale specified in defaultLocale is enabled. In this case, the value fetched in <tt class="docutils literal"><span class="pre">HttpServletRequest#getLocale</span></tt> is considered.</div>
</div>
</td>
</tr>
</tbody>
</table>
</div></blockquote>
<ul class="simple" id="i18n-change-locale-key">
<li>When changing key of locale to be set in request parameter</li>
</ul>
<ul class="simple">
<li>spring-mvc.xml</li>
</ul>
<blockquote>
<div><div class="highlight-xml"><div class="highlight"><pre><span class="nt">&lt;bean</span>
  <span class="na">class=</span><span class="s">&quot;org.springframework.web.servlet.i18n.LocaleChangeInterceptor&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;paramName&quot;</span> <span class="na">value=</span><span class="s">&quot;lang&quot;</span><span class="nt">/&gt;</span>  <span class="c">&lt;!-- (1) --&gt;</span>
<span class="nt">&lt;/bean&gt;</span>
</pre></div>
</div>
<table border="1" class="docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><div class="first last line-block">
<div class="line">Sr. No.</div>
</div>
</th>
<th class="head"><div class="first last line-block">
<div class="line">Description</div>
</div>
</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">In paramName, specify the key of locale set in request parameter. In this example, it is &#8220;request URL?lang=xx&#8221;.</div>
<div class="line"><strong>When key is not specified, &#8220;locale&#8221; gets set.</strong> With &#8220;request URL?locale=xx&#8221;, it becomes <a class="reference internal" href="#i18n-set-locale-jsp"><em>enabled</em></a>.</div>
</div>
</td>
</tr>
</tbody>
</table>
</div></blockquote>
<p>In case of CookieLocaleResolver</p>
<ul class="simple">
<li>spring-mvc.xml</li>
</ul>
<blockquote>
<div><div class="highlight-xml"><div class="highlight"><pre><span class="c">&lt;!-- omitted --&gt;</span>
<span class="nt">&lt;mvc:interceptors&gt;</span>
  <span class="nt">&lt;mvc:interceptor&gt;</span>
    <span class="nt">&lt;mvc:mapping</span> <span class="na">path=</span><span class="s">&quot;/**&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;mvc:exclude-mapping</span> <span class="na">path=</span><span class="s">&quot;/resources/**&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;mvc:exclude-mapping</span> <span class="na">path=</span><span class="s">&quot;/**/*.html&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;bean</span>
      <span class="na">class=</span><span class="s">&quot;org.springframework.web.servlet.i18n.LocaleChangeInterceptor&quot;</span><span class="nt">&gt;</span>  <span class="c">&lt;!-- (1) --&gt;</span>
    <span class="nt">&lt;/bean&gt;</span>
        <span class="c">&lt;!-- omitted --&gt;</span>
  <span class="nt">&lt;/mvc:interceptor&gt;</span>
<span class="nt">&lt;/mvc:interceptors&gt;</span>

<span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">&quot;localeResolver&quot;</span> <span class="na">class=</span><span class="s">&quot;org.springframework.web.servlet.i18n.CookieLocaleResolver&quot;</span><span class="nt">&gt;</span>  <span class="c">&lt;!-- (2) --&gt;</span>
      <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;defaultLocale&quot;</span> <span class="na">value=</span><span class="s">&quot;en&quot;</span><span class="nt">/&gt;</span>  <span class="c">&lt;!-- (3) --&gt;</span>
      <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;cookieName&quot;</span> <span class="na">value=</span><span class="s">&quot;localeCookie&quot;</span><span class="nt">/&gt;</span>  <span class="c">&lt;!-- (4) --&gt;</span>
<span class="nt">&lt;/bean&gt;</span>
</pre></div>
</div>
<table border="1" class="docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><div class="first last line-block">
<div class="line">Sr. No.</div>
</div>
</th>
<th class="head"><div class="first last line-block">
<div class="line">Description</div>
</div>
</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Define <tt class="docutils literal"><span class="pre">org.springframework.web.servlet.i18n.LocaleChangeInterceptor</span></tt> in Spring MVC interceptor.</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="first last line-block">
<div class="line">(2)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">In id attribute &#8220;localeResolver&#8221; of bean tag, specify <tt class="docutils literal"><span class="pre">org.springframework.web.servlet.i18n.CookieLocaleResolver</span></tt>.</div>
<div class="line">id attribute of bean tag should be set as &#8220;localeResolver&#8221;.</div>
<div class="line">By performing these settings, LocaleResolver used in <tt class="docutils literal"><span class="pre">org.springframework.web.servlet.i18n.LocaleChangeInterceptor</span></tt> is set to LocaleResolver of (3).</div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(3)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">When locale is not specified, locale specified in defaultLocale is enabled. In this case, the value fetched in <tt class="docutils literal"><span class="pre">HttpServletRequest#getLocale</span></tt> is considered.</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="first last line-block">
<div class="line">(4)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">The value specified in cookieName properties is considered cookie name. If not specified, it is considered as <tt class="docutils literal"><span class="pre">org.springframework.web.servlet.i18n.CookieLocaleResolver.LOCALE</span></tt>. It is recommended to change the same since use of springframework is explicit.</div>
</div>
</td>
</tr>
</tbody>
</table>
</div></blockquote>
<ul class="simple">
<li>When changing the key of locale to be set in request parameter</li>
</ul>
<p><a class="reference internal" href="#i18n-change-locale-key"><em>settings</em></a> are similar to SessionLocaleResolver.</p>
<p>See the example below for properties settings.</p>
<p><strong>Properties file</strong></p>
<ul class="simple">
<li>application-messages.properties</li>
</ul>
<blockquote>
<div><div class="highlight-properties"><div class="highlight"><pre><span class="na">i.xx.yy.0001</span> <span class="o">=</span> <span class="s">changed locale</span>
<span class="na">i.xx.yy.0002</span> <span class="o">=</span> <span class="s">Confirm change of locale at next screen</span>
</pre></div>
</div>
</div></blockquote>
<ul class="simple">
<li>application-messages_ja.properties</li>
</ul>
<blockquote>
<div><div class="highlight-properties"><div class="highlight"><pre><span class="na">i.xx.yy.0001</span> <span class="o">=</span> <span class="s">Localeを変更しました。</span>
<span class="na">i.xx.yy.0002</span> <span class="o">=</span> <span class="s">次の画面でのLocale変更を確認</span>
</pre></div>
</div>
</div></blockquote>
<p id="i18n-set-locale-jsp"><strong>JSP file</strong></p>
<ul class="simple">
<li>JSP file for screen display</li>
</ul>
<blockquote>
<div><div class="highlight-jsp"><div class="highlight"><pre><span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&#39;${pageContext.request.contextPath}?locale=en&#39;</span><span class="nt">&gt;</span>English<span class="nt">&lt;/a&gt;</span>  <span class="c">&lt;!-- (1) --&gt;</span>
<span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&#39;${pageContext.request.contextPath}?locale=ja&#39;</span><span class="nt">&gt;</span>Japanese<span class="nt">&lt;/a&gt;</span>
<span class="nt">&lt;spring:message</span> <span class="na">code=</span><span class="s">&quot;i.xx.yy.0001&quot;</span> <span class="nt">/&gt;</span>
</pre></div>
</div>
<table border="1" class="docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><div class="first last line-block">
<div class="line">Sr. No.</div>
</div>
</th>
<th class="head"><div class="first last line-block">
<div class="line">Description</div>
</div>
</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last line-block">
<div class="line">(1)</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Submit the request parameter key specified in paramName of LocaleChangeInterceptor.</div>
<div class="line">In the above example, it is changed to English locale in English link and to Japanese locale in Japanese link.</div>
<div class="line">Hereafter, the selected locale is enabled.</div>
<div class="line">As &#8220;en&#8221; properties file does not exist, English locale is read from properties file by default.</div>
</div>
</td>
</tr>
</tbody>
</table>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<ul class="last simple">
<li>Spring tag library should be defined in common jsp files to be included.</li>
<li>For details on common jsp files to be included, refer to <a class="reference internal" href="../ImplementationAtEachLayer/ApplicationLayer.html#view-jsp-include-label"><em>Creating common JSP for include</em></a>.</li>
</ul>
</div>
</div></blockquote>
<p>Following is an example of changing locale depending on screen operations.</p>
<div class="figure align-center">
<a class="reference internal image-reference" href="../_images/i18n_change_locale_on_screen.png"><img alt="i18n change locale on screen" src="../_images/i18n_change_locale_on_screen.png" style="width: 30%;" /></a>
</div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="Codelist.html" title="5.14. Codelist"
             >next</a> |</li>
        <li class="right" >
          <a href="DoubleSubmitProtection.html" title="5.12. Double Submit Protection"
             >previous</a> |</li>
        <li><a href="../index.html">TERASOLUNA Global Framework Development Guideline 1.1.0-SNAPSHOT documentation</a> &raquo;</li>
          <li><a href="index.html" >5. Architecture in Detail - TERASOLUNA Global Framework</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2013-2014, NTT DATA.
    Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.2.Theme by <a href="http://github.com/vkvn">vkvn</a>
    </div>
    
    <script>
    
    $(function() {
    	var $sidebar	= $('.sphinxsidebar'),
    		$window		= $(window),
    		offset		= $sidebar.offset(),
    		topPadding	= 3,
    		$scroll		= $('#scroll');
    	
    	$window.scroll(function() {
    		if ($scroll.is(':checked')) {
				if ($window.scrollTop() > offset.top) {
					$sidebar.stop().animate({
						marginTop:$window.scrollTop() - offset.top + topPadding
					});
				} else {
					$sidebar.stop().animate({
						marginTop:0
					});
				}
			}
		});
    	
    	var $navList = $('ul:first', $sidebar);
    	$('li:first', $navList).addClass('open');
    	
    	$navList.treeview({
    		persist: "location",
    		collapsed: true,
    		unique: false
    	});
    	
	});
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-46550814-1', 'terasolunaorg.github.io');
    ga('send', 'pageview');
    </script>
  </body>
</html>